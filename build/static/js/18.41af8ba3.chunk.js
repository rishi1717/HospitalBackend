(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{291:function(e,t,a){"use strict";var n=a(627),r=a(626),o=a(571),c=a(617),s=a(0),l=a.n(s),i=a(18),m=a(58);t.a=function(){var e=Object(i.g)();return l.a.createElement(m.a,null,l.a.createElement(n.a,{sx:{display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",height:"60vh"}},l.a.createElement(r.a,{elevation:3,sx:{border:1,borderColor:"#EF4242",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",m:{xs:1,sm:15},p:{xs:2,sm:4},backgroundColor:"#eaeaea"}},l.a.createElement(o.a,{sx:{p:2,color:"#595959",fontSize:"1.6rem"},textAlign:"center"},"You are not authorized to access this page !!!"),l.a.createElement(c.a,{onClick:function(){e("/login")},sx:{p:2,fontWeight:"bold"}},"Login To access this page"))))}},590:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(24),o=a(8),c=a.n(o),s=a(10),l=a(6),i=a(625),m=a(571),u=a(618),d=a(628),f=a(639),g=a(611),b=a(604),p=a(620),h=a(641),x=a(627),j=a(617),E=a(0),O=a.n(E),v=a(596),S=a(402),k=a(597),D=a(18),T=a(28),y=a(59),C=a(58),w=a(29),A=a(291),Y=a(15),q=a(339),P=a.n(q),W=a(340),F=a.n(W),I=a(341),M=a.n(I);a(343);P.a.extend(F.a);var z={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:10},desktop:{breakpoint:{max:3e3,min:1024},items:8},tablet:{breakpoint:{max:1024,min:464},items:6},mobile:{breakpoint:{max:464,min:0},items:3}};t.default=function(){if(localStorage.userToken){var e=Object(D.f)(),t={fee:0,name:"not selected"};e.state&&(t=e.state.doctor);var a=Object(E.useState)([]),o=Object(l.a)(a,2),q=o[0],W=o[1],F=Object(E.useState)(""),I=Object(l.a)(F,2),H=I[0],L=I[1],B=Object(E.useState)([]),N=Object(l.a)(B,2),R=N[0],_=N[1],G=Object(E.useState)(0),J=Object(l.a)(G,2),V=J[0],K=J[1],Q=Object(E.useState)(0),U=Object(l.a)(Q,2),X=U[0],Z=U[1],$=Object(E.useState)(0),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(E.useState)(0),re=Object(l.a)(ne,2),oe=re[0],ce=re[1],se=Object(E.useState)(0),le=Object(l.a)(se,2),ie=le[0],me=le[1],ue=Object(E.useState)(0),de=Object(l.a)(ue,2),fe=de[0],ge=de[1],be=Object(E.useState)([]),pe=Object(l.a)(be,2),he=pe[0],xe=pe[1],je=Object(E.useState)({}),Ee=Object(l.a)(je,2),Oe=Ee[0],ve=Ee[1],Se=Object(E.useState)({user:"",age:"",gender:"",phone:"",reason:"",fee:t.fee,doctor:t.name,time:null,date:null,active:!0,status:"Scheduled"}),ke=Object(l.a)(Se,2),De=ke[0],Te=ke[1];Object(E.useEffect)(function(){Object(s.a)(c.a.mark(function e(){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.a.get("/user/".concat(localStorage.userId),{headers:{"auth-token":localStorage.userToken}});case 2:return a=e.sent,ve(a.data.user),e.next=6,Y.a.get("/appointment/".concat(t._id,"/").concat(new Date),{headers:{"auth-token":localStorage.userToken}});case 6:n=e.sent,xe(n.data.doctorTiming.days),_(n.data.timeArray),K(n.data.doctorTiming.startTime),ce(n.data.doctorTiming.endTime);case 11:case"end":return e.stop()}},e)}))()},[]),Object(E.useEffect)(function(){Te(Object(r.a)({},De,{user:Oe.firstName?Oe.firstName:"",age:Oe.age?Oe.age:"",gender:Oe.gender?Oe.gender:"",phone:Oe.phone?Oe.phone:""})),Ye()},[Oe]),Object(E.useEffect)(function(){Z(P()(V,"hh:mm A").format("HH")),ae(P()(V,"hh:mm A").format("mm")),me(P()(oe,"hh:mm A").format("HH")),ge(P()(oe,"hh:mm A").format("mm"))},[V,oe]),Object(E.useEffect)(function(){for(var e=P()().hour(X).minute(te),t=P()().hour(ie).minute(fe),a=[];e.isBefore(t);)a.push(e.format("hh:mm A")),e=e.add(30,"minute");W(a)},[fe]);var ye=Object(D.g)(),Ce=Object(y.a)(),we=Ce.register,Ae=Ce.handleSubmit,Ye=Ce.reset,qe=Ce.formState.errors,Pe=function(e){var t=e.currentTarget;Te(Object(r.a)({},De,Object(n.a)({},t.name,t.value)))},We=function(){var e=Object(s.a)(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L(""),a=Object(r.a)({},De,{date:P()(De.date).format("DD/MM/YYYY"),userId:localStorage.userId,doctorId:t._id});try{"Invalid Date"===a.date?L("Please select Date and Time for your appointment"):a.time?ye("/confirmbooking",{state:{details:a}}):L("Please select a Time for your appointment")}catch(n){console.log(n.message)}case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return O.a.createElement(C.a,null,O.a.createElement(i.a,{sx:{textAlign:"center",fontSize:{xs:"1rem",sm:"1.5rem"},fontFamily:"sans-serif",mt:2,color:"#1976D2"},component:"p"},"Booking"),O.a.createElement(m.a,{component:"form",noValidate:!0,onSubmit:Ae(We),sx:{m:{xs:2,sm:10}}},O.a.createElement(u.a,{container:!0,spacing:2},O.a.createElement(u.a,{item:!0,xs:12,sm:8},O.a.createElement(d.a,Object.assign({},we("user",{required:"Provide patient name!",minLength:{value:2,message:"Atleast 2 characters required"}}),{name:"user",required:!0,fullWidth:!0,id:"user",label:"Patient Name",autoFocus:!0,onChange:Pe,value:De.user,error:qe.user,helperText:qe.user?qe.user.message:null}))),O.a.createElement(u.a,{item:!0,xs:6,sm:4},O.a.createElement(d.a,Object.assign({},we("age",{required:"Provide age!"}),{required:!0,fullWidth:!0,id:"age",label:"Age",name:"age",onChange:Pe,value:De.age,error:qe.age,helperText:qe.age?qe.age.message:null}))),O.a.createElement(u.a,{item:!0,xs:6,sm:3},O.a.createElement(f.a,{fullWidth:!0},O.a.createElement(g.a,{id:"gender"},"Gender"),O.a.createElement(b.a,Object.assign({},we("gender",{required:"Select gender!"}),{required:!0,fullWidth:!0,label:"Gender",id:"gender",name:"gender",value:De.gender,onChange:function(e){Te(Object(r.a)({},De,Object(n.a)({},e.target.name,e.target.value)))},error:qe.gender}),O.a.createElement(p.a,{value:"Male"},"Male"),O.a.createElement(p.a,{value:"Female"},"Female"),O.a.createElement(p.a,{value:"Others"},"Others")),O.a.createElement(h.a,{sx:{color:"#D32F2F"}},qe.gender?qe.gender.message:null))),O.a.createElement(u.a,{item:!0,xs:12,md:9},O.a.createElement(d.a,Object.assign({},we("phone",{required:"Provide phone number!",minLength:{value:9,message:"Invalid phone"}}),{required:!0,fullWidth:!0,id:"phone",label:"Phone",name:"phone",onChange:Pe,value:De.phone,error:qe.phone,helperText:qe.phone?qe.phone.message:null}))),O.a.createElement(u.a,{item:!0,xs:12},O.a.createElement(d.a,Object.assign({},we("reason",{required:"State reason for appointment!",minLength:{value:5,message:"Atleast 5 characters required"}}),{required:!0,fullWidth:!0,id:"reason",label:"Reason for appointment",name:"reason",onChange:Pe,value:De.reason,error:qe.reason,helperText:qe.reason?qe.reason.message:null}))),O.a.createElement(u.a,{item:!0,xs:8},O.a.createElement(d.a,{fullWidth:!0,id:"doctor",label:"Appointment to",name:"doctor",value:t.name,InputProps:{style:{fontSize:"1rem",color:"#595959",fontWeight:"bold"}}})),O.a.createElement(u.a,{item:!0,xs:4},O.a.createElement(d.a,{fullWidth:!0,id:"fee",label:"Fee to be paid",name:"fee",value:t.fee+" Rs/",InputProps:{style:{fontSize:"1.1rem",color:"#595959",fontWeight:"bold"}}})),O.a.createElement(u.a,{item:!0,xs:12,sm:3},O.a.createElement(S.a,{dateAdapter:v.a},O.a.createElement(k.a,{maxDate:(new Date).setDate((new Date).getDate()+60),disablePast:!0,shouldDisableDate:function(e){return!he.includes(e.getDay())},label:"Select date",id:"date",name:"date",value:De.date,onChange:function(){var e=Object(s.a)(c.a.mark(function e(a){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Te(Object(r.a)({},De,{date:a})),e.next=3,Y.a.get("/appointment/".concat(t._id,"/").concat(a),{headers:{"auth-token":localStorage.userToken}});case 3:n=e.sent,_(n.data.timeArray),K(n.data.doctorTiming.startTime),ce(n.data.doctorTiming.endTime),Ye();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),renderInput:function(e){return O.a.createElement(d.a,e)}}))),O.a.createElement(u.a,{item:!0,xs:12,sm:9},O.a.createElement(x.a,{sx:{border:1,borderColor:"#595959",borderRadius:1,p:1}},De.date?O.a.createElement(M.a,{responsive:z,autoPlaySpeed:1e5,key:q},q.map(function(e,t){var a=P()(),n=P()(e,"hh:mm A"),o=a.format("DD/MM/YYYY");return P()(De.date).format("DD/MM/YYYY")===o&&n.isBefore(a.add(1,"Hour"))&&R.push(e),O.a.createElement(j.a,{onClick:function(){var t;t=e,Te(Object(r.a)({},De,{time:t}))},disabled:R.includes(e),sx:{backgroundColor:e===De.time?"#609acf":"#f5f5f5",color:e===De.time?"#000":""},key:t},e)})):O.a.createElement(i.a,{sx:{fontSize:12,p:1.15,color:"#595959"}},"Select a date to see available Time slots")))),O.a.createElement(i.a,{sx:{fontSize:12,p:1.15,color:"red",textAlign:"center"}},H),O.a.createElement(u.a,{item:!0,xs:6,sm:6},O.a.createElement(j.a,{type:"submit",sx:{mt:4,ml:1,backgroundColor:"#609acf",color:"white","&:hover":{backgroundColor:"white",color:"#609acf"}}},"Book Appointment"),O.a.createElement(T.b,{style:{textDecoration:"none"},to:"/doctors"},O.a.createElement(w.a,{value:"Cancel",color:"#EF4242",text:"white"})))))}return O.a.createElement(A.a,null)}}}]);
//# sourceMappingURL=18.41af8ba3.chunk.js.map